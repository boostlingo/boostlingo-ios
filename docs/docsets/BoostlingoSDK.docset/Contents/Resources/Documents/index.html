<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BoostlingoSDK  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>


    <a title="BoostlingoSDK  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          BoostlingoSDK 2.0.0 Docs
        </a>
        
      </p>
    
    
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">BoostlingoSDK</a>
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BLFilteringLogger.html">BLFilteringLogger</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BLNullLogger.html">BLNullLogger</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BLPrintLogger.html">BLPrintLogger</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Boostlingo.html">Boostlingo</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BLCallFlowEvent.html">BLCallFlowEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BLChatFlowEvent.html">BLChatFlowEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BLError.html">BLError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BLLogLevel.html">BLLogLevel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BLParticipantState.html">BLParticipantState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BLParticipantType.html">BLParticipantType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/DataError.html">DataError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/FieldType.html">FieldType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/BLCall.html">BLCall</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/BLLogger.html">BLLogger</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/BLVideoCall.html">BLVideoCall</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols.html#/s:13BoostlingoSDK11BLVoiceCallP">BLVoiceCall</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CustomField.html">CustomField</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/AdditionalField.html">AdditionalField</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BLParticipant.html">BLParticipant</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CallDetails.html">CallDetails</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CallDictionaries.html">CallDictionaries</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CallRequest.html">CallRequest</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ChatMessage.html">ChatMessage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ChatUser.html">ChatUser</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CheckBoxCustomField.html">CheckBoxCustomField</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CustomFieldIdValue.html">CustomFieldIdValue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CustomFieldOption.html">CustomFieldOption</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CustomForm.html">CustomForm</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/EditTextCustomField.html">EditTextCustomField</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Gender.html">Gender</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ImageInfo.html">ImageInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Language.html">Language</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ListMultipleCustomField.html">ListMultipleCustomField</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ListSingleCustomField.html">ListSingleCustomField</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Profile.html">Profile</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/RadioButtonCustomField.html">RadioButtonCustomField</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ServiceType.html">ServiceType</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='code-boostlingosdk-code' class='heading'><code>BoostlingoSDK</code></h1>

<p>The Boostlingo iOS Swift library enables developers to embed the Boostlingo caller directly into their own applications. This can then be used for placing calls in the Boostlingo platform.</p>
<h2 id='getting-started' class='heading'>Getting Started</h2>

<p>In order to place calls in Boostlingo, you must have a requestor account. You can then embed Boostlingo iOS SDK into your application, request a Boostlingo API token from your server, and start making calls.</p>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='swift-package-manager-recommended' class='heading'>Swift Package Manager (recommended)</h3>

<p>You can add this SDK to your project using <a href="https://swift.org/package-manager/">Swift Package Manager</a>:</p>

<ol>
<li>In Xcode, go to <strong>File &gt; Add Packages&hellip;</strong></li>
<li>Enter the repository URL: <a href="https://github.com/boostlingo/boostlingo-ios.git">https://github.com/boostlingo/boostlingo-ios.git</a></li>
<li>Select the version you want to install and add the package to your target.</li>
</ol>

<p>Or add it directly to your <code>Package.swift</code> dependencies:</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
 <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/boostlingo/boostlingo-ios.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"2.0.0"</span><span class="p">)</span>
<span class="p">]</span>
</code></pre>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<p>It&rsquo;s easy to install the framework if you manage your dependencies using <a href="https://cocoapods.org/">CocoaPods</a>. Simply add the following to your Podfile:</p>
<pre class="highlight shell"><code><span class="nb">source</span> <span class="s1">'https://github.com/cocoapods/specs'</span>

target <span class="s1">'TARGET_NAME'</span> <span class="k">do
  </span>use_frameworks!

  pod <span class="s1">'BoostlingoSDK'</span>, <span class="s1">'2.0.0'</span>
end
</code></pre>

<p>Then run <code>pod install</code> to install the dependencies to your project.</p>
<h2 id='usage' class='heading'>Usage</h2>

<p>These steps will guide you through the basic process of placing calls through Boostlingo.</p>
<h3 id='request-boostlingo-authentication-token' class='heading'>Request Boostlingo authentication token</h3>

<p>First step is to obtain a boostlingo authentication token from your server.  Never store an API token or username/password in your front end/mobile code.  Your server should be the one that logs the user in, obtains the authentication token, and passes it back down to the web application.</p>
<h3 id='obtain-boostlingo-authentication-token-via-api-endpoint' class='heading'>Obtain Boostlingo authentication token via API endpoint</h3>
<pre class="highlight json"><code><span class="err">POST</span><span class="w"> </span><span class="err">https://app.boostlingo.com/api/web/account/signin</span><span class="w">
</span></code></pre>

<p>Request Model</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
</span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Response Model
<code>token</code> is what will be needed by the boostlingo sdk</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"userAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;integer&gt;"</span><span class="p">,</span><span class="w">
</span><span class="nl">"refreshToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
</span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
</span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
</span><span class="nl">"companyAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;integer&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='quickstart' class='heading'>Quickstart</h3>

<p>This is a working example that will demonstrate how to make Boostlingo calls.
Update the placeholder of TOKEN with the token you got from the API.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">boostlingo</span> <span class="o">=</span> <span class="kt">Boostlingo</span><span class="p">(</span><span class="nv">authToken</span><span class="p">:</span> <span class="s">"your token"</span><span class="p">,</span> <span class="nv">region</span><span class="p">:</span> <span class="s">"us"</span><span class="p">,</span> <span class="nv">logger</span><span class="p">:</span> <span class="kt">BLPrintLogger</span><span class="p">())</span>
</code></pre>
<h3 id='create-instance-of-boostlingo-class-and-load-dictionaries' class='heading'>Create instance of Boostlingo class and load dictionaries</h3>

<p>Async <code>initialize()</code> method must be called after creating an instance of <code><a href="Classes/Boostlingo.html">Boostlingo</a></code> to ensure all internal services are fully configured and ready to use. The library will cache specific data and create instances of classes that do not need to be refreshed very frequently. The next step is typically to pull down the call dictionaries. Whether you expose these directly or are just mapping languages and service types with your internal types, loading these lists will almost definitely be required.</p>
<pre class="highlight swift"><code><span class="c1">// For production builds use BLNullLogger() or your custom logger.</span>
<span class="k">let</span> <span class="nv">boostlingo</span> <span class="o">=</span> <span class="kt">Boostlingo</span><span class="p">(</span>
    <span class="nv">authToken</span><span class="p">:</span> <span class="n">authToken</span><span class="p">,</span>
    <span class="nv">region</span><span class="p">:</span> <span class="s">"us"</span><span class="p">,</span>
    <span class="nv">logger</span><span class="p">:</span> <span class="kt">BLPrintLogger</span><span class="p">()</span>
<span class="p">)</span>
<span class="k">try</span> <span class="k">await</span> <span class="n">boostlingo</span><span class="o">.</span><span class="nf">initialize</span><span class="p">()</span>

<span class="c1">// Pulling down the call dictionaries.</span>
<span class="k">let</span> <span class="nv">dictionaries</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">boostlingo</span><span class="o">.</span><span class="nf">getCallDictionaries</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">languages</span> <span class="o">=</span> <span class="n">dictionaries</span><span class="p">?</span><span class="o">.</span><span class="n">languages</span> <span class="p">??</span> <span class="p">[]</span>
<span class="k">let</span> <span class="nv">serviceTypes</span> <span class="o">=</span> <span class="n">dictionaries</span><span class="p">?</span><span class="o">.</span><span class="n">serviceTypes</span> <span class="p">??</span> <span class="p">[]</span>
<span class="k">let</span> <span class="nv">genders</span> <span class="o">=</span> <span class="n">dictionaries</span><span class="p">?</span><span class="o">.</span><span class="n">genders</span> <span class="p">??</span> <span class="p">[]</span>
</code></pre>
<h3 id='disposing-boostlingo-sdk-after-use' class='heading'>Disposing Boostlingo SDK after use</h3>

<p>Async <code>dispose()</code> method should be used when you are finished using the SDK to ensure that all internal resources, such as network connections, memory, and background tasks, are properly released. After calling <code>dispose()</code>, the SDK instance should not be used again.</p>
<pre class="highlight swift"><code> <span class="k">await</span> <span class="n">boostlingo</span><span class="o">.</span><span class="nf">dispose</span><span class="p">()</span>
</code></pre>
<h3 id='retrieving-the-pre-call-custom-form' class='heading'>Retrieving the pre-call custom Form</h3>

<p>You can use the <code>getPreCallCustomForm</code> method to fetch the custom form configuration required before starting a call. This form may include fields that the user needs to fill out prior to initiating a call.
The <code>getPreCallCustomForm</code> method returns a <code>PreCallCustomForm</code> object containing the form fields and metadata. If the form cannot be retrieved, the method will throw an error.</p>
<pre class="highlight swift"><code><span class="k">do</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">form</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">boostlingo</span><span class="o">.</span><span class="nf">getPreCallCustomForm</span><span class="p">()</span>
    <span class="c1">// Present the form to the user.</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Form title: </span><span class="se">\(</span><span class="n">form</span><span class="o">.</span><span class="n">title</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field</span> <span class="k">in</span> <span class="n">form</span><span class="o">.</span><span class="n">fields</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Field: </span><span class="se">\(</span><span class="n">field</span><span class="o">.</span><span class="n">label</span><span class="se">)</span><span class="s"> (</span><span class="se">\(</span><span class="n">field</span><span class="o">.</span><span class="n">type</span><span class="se">)</span><span class="s">)"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Failed to fetch pre-call custom form: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">...</span>

<span class="k">let</span> <span class="nv">fields</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="nf">map</span><span class="p">({</span> <span class="n">customField</span> <span class="k">in</span>
    <span class="kt">CustomFieldDto</span><span class="p">(</span>
        <span class="nv">fieldId</span><span class="p">:</span> <span class="n">customField</span><span class="o">.</span><span class="n">fieldId</span><span class="p">,</span>
        <span class="nv">value</span><span class="p">:</span> <span class="c1">// User answer.</span>
    <span class="p">)</span>
<span class="p">})</span> <span class="p">??</span> <span class="p">[]</span>

<span class="o">...</span>

<span class="k">let</span> <span class="nv">callRequest</span> <span class="o">=</span> <span class="kt">CallRequest</span><span class="p">(</span>
    <span class="nv">languageFromId</span><span class="p">:</span> <span class="n">selectedLanguageFrom</span><span class="p">,</span>
    <span class="nv">languageToId</span><span class="p">:</span> <span class="n">selectedLanguageTo</span><span class="p">,</span>
    <span class="nv">serviceTypeId</span><span class="p">:</span> <span class="n">selectedServiceType</span><span class="p">,</span>
    <span class="nv">genderId</span><span class="p">:</span> <span class="n">selectedGender</span><span class="p">,</span>
    <span class="nv">isVideo</span><span class="p">:</span> <span class="n">isVideo</span><span class="p">,</span>
    <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">AdditionalField</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"CustomKey"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"CustomValue"</span><span class="p">)],</span>
    <span class="nv">fieldData</span><span class="p">:</span> <span class="n">fields</span> <span class="c1">// Use your user responses here.</span>
<span class="p">)</span>
</code></pre>
<h4 id='custom-form-fields' class='heading'>Custom form fields</h4>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">CheckBoxCustomField</span><span class="p">:</span> <span class="kt">CustomField</span><span class="p">,</span> <span class="kt">Hashable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldId</span><span class="p">:</span> <span class="kt">Int64</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldTypeId</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">label</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">readonly</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">required</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">value</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int64</span><span class="p">]?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">CustomFieldOption</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">struct</span> <span class="kt">EditTextCustomField</span><span class="p">:</span> <span class="kt">CustomField</span><span class="p">,</span> <span class="kt">Hashable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldId</span><span class="p">:</span> <span class="kt">Int64</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldTypeId</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">label</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">readonly</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">required</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldType</span><span class="p">:</span> <span class="kt">FieldType</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ListMultipleCustomField</span><span class="p">:</span> <span class="kt">CustomField</span><span class="p">,</span> <span class="kt">Hashable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldId</span><span class="p">:</span> <span class="kt">Int64</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldTypeId</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">label</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">readonly</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">required</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">value</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int64</span><span class="p">]?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">CustomFieldOption</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ListSingleCustomField</span><span class="p">:</span> <span class="kt">CustomField</span><span class="p">,</span> <span class="kt">Hashable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldId</span><span class="p">:</span> <span class="kt">Int64</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldTypeId</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">label</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">readonly</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">required</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">CustomFieldOption</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">struct</span> <span class="kt">RadioButtonCustomField</span><span class="p">:</span> <span class="kt">CustomField</span><span class="p">,</span> <span class="kt">Hashable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldId</span><span class="p">:</span> <span class="kt">Int64</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fieldTypeId</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">label</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">readonly</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">required</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">CustomFieldOption</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>
<h3 id='calls' class='heading'>Calls</h3>

<p>Before placing a call you will need to check record permission. It&rsquo;s required to To initiate a voice call, use the <code>makeVoiceCall</code> or <code>makeVideoCall</code> methods provided by the SDK.</p>
<h4 id='observing-call-events' class='heading'>Observing call events</h4>

<p>The SDK provides a <code>callEventStream</code> property of type <code>AsyncStream&lt;BLCallFlowEvent&gt;</code>, which allows you to observe call events in a modern, Swift-concurrency-friendly way.</p>

<p>Instead of using weak delegates or callback protocols, you can use <code>callEventStream</code> to asynchronously receive updates about the call lifecycle, such as connection status, participant changes, or errors.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">subscribeOnCallEvents</span><span class="p">()</span> <span class="k">async</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">callEventTask</span> <span class="o">=</span> <span class="kt">Task</span> <span class="p">{</span>
        <span class="k">for</span> <span class="k">await</span> <span class="n">event</span> <span class="k">in</span> <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">boostlingo</span><span class="o">.</span><span class="n">callEventStream</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="o">!</span><span class="kt">Task</span><span class="o">.</span><span class="n">isCancelled</span> <span class="k">else</span> <span class="p">{</span> <span class="k">break</span> <span class="p">}</span>
            <span class="k">switch</span> <span class="n">event</span> <span class="p">{</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">callDidConnect</span><span class="p">(</span><span class="k">let</span> <span class="nv">call</span><span class="p">,</span> <span class="nv">participants</span><span class="p">:</span> <span class="n">_</span><span class="p">):</span> <span class="k">break</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">callDidDisconnect</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
                <span class="k">await</span> <span class="nf">cancelSubscriptions</span><span class="p">()</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">callDidFailToConnect</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
                <span class="k">await</span> <span class="nf">cancelSubscriptions</span><span class="p">()</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">participantConnected</span><span class="p">(</span><span class="k">let</span> <span class="nv">participant</span><span class="p">,</span> <span class="nv">call</span><span class="p">:</span> <span class="k">let</span> <span class="nv">call</span><span class="p">):</span> <span class="k">break</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">participantUpdated</span><span class="p">(</span><span class="k">let</span> <span class="nv">participant</span><span class="p">,</span> <span class="nv">call</span><span class="p">:</span> <span class="k">let</span> <span class="nv">call</span><span class="p">):</span> <span class="k">break</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">participantDisconnected</span><span class="p">(</span><span class="k">let</span> <span class="nv">participant</span><span class="p">,</span> <span class="nv">call</span><span class="p">:</span> <span class="k">let</span> <span class="nv">call</span><span class="p">):</span> <span class="k">break</span>
            <span class="kd">@unknown</span> <span class="k">default</span><span class="p">:</span> <span class="k">break</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="nf">setCallEventTask</span><span class="p">(</span><span class="n">callEventTask</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// You should cancel the subscriptions once the call is finished.</span>
<span class="kd">func</span> <span class="nf">cancelSubscriptions</span><span class="p">()</span> <span class="k">async</span> <span class="p">{</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">callEventsTask</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">chatEventTask</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="nf">setCallEventTask</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="nf">setChatEventTask</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h4 id='observing-chat-events' class='heading'>Observing chat events</h4>

<p>The SDK provides a <code>chatEventStream</code> property of type <code>AsyncStream&lt;BLChatFlowEvent&gt;</code>, which allows you to observe chat events in a modern, Swift-concurrency-friendly way.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">subscribeOnChatEvents</span><span class="p">()</span> <span class="k">async</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">chatEventTask</span> <span class="o">=</span> <span class="kt">Task</span> <span class="p">{</span>
        <span class="k">for</span> <span class="k">await</span> <span class="n">event</span> <span class="k">in</span> <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">boostlingo</span><span class="o">.</span><span class="n">chatEventStream</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="o">!</span><span class="kt">Task</span><span class="o">.</span><span class="n">isCancelled</span> <span class="k">else</span> <span class="p">{</span> <span class="k">break</span> <span class="p">}</span>
            <span class="k">switch</span> <span class="n">event</span> <span class="p">{</span>
            <span class="k">case</span> <span class="o">.</span><span class="nv">chatConnected</span><span class="p">:</span> <span class="k">break</span>
            <span class="k">case</span> <span class="o">.</span><span class="nv">chatDisconnected</span><span class="p">:</span> <span class="k">break</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">chatMessageReceived</span><span class="p">(</span><span class="k">let</span> <span class="nv">message</span><span class="p">):</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"Chat: </span><span class="se">\(</span><span class="n">message</span><span class="o">.</span><span class="n">text</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="kd">@unknown</span> <span class="k">default</span><span class="p">:</span> <span class="k">break</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="nf">setChatEventTask</span><span class="p">(</span><span class="n">chatEventTask</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// You should cancel the subscriptions once the call is finished.</span>
<span class="kd">func</span> <span class="nf">cancelSubscriptions</span><span class="p">()</span> <span class="k">async</span> <span class="p">{</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">callEventsTask</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">chatEventTask</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="nf">setCallEventTask</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="nf">setChatEventTask</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h4 id='initiating-a-voice-call' class='heading'>Initiating a voice call</h4>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">startCall</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">Task</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">callRequest</span> <span class="o">=</span> <span class="kt">CallRequest</span><span class="p">(</span>
                <span class="nv">languageFromId</span><span class="p">:</span> <span class="n">selectedLanguageFrom</span><span class="p">,</span>
                <span class="nv">languageToId</span><span class="p">:</span> <span class="n">selectedLanguageTo</span><span class="p">,</span>
                <span class="nv">serviceTypeId</span><span class="p">:</span> <span class="n">selectedServiceType</span><span class="p">,</span>
                <span class="nv">genderId</span><span class="p">:</span> <span class="n">selectedGender</span><span class="p">,</span>
                <span class="nv">isVideo</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">AdditionalField</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"CustomKey"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"CustomValue"</span><span class="p">)],</span>
                <span class="nv">fieldData</span><span class="p">:</span> <span class="n">fields</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="nf">subscribeOnCallEvents</span><span class="p">()</span>
            <span class="k">await</span> <span class="nf">subscribeOnChatEvents</span><span class="p">()</span>
            <span class="k">let</span> <span class="nv">call</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">boostlingo</span><span class="o">.</span><span class="nf">makeVoiceCall</span><span class="p">(</span><span class="nv">callRequest</span><span class="p">:</span> <span class="n">callRequest</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="nf">setCall</span><span class="p">(</span><span class="n">call</span><span class="p">)</span>
            <span class="n">callState</span> <span class="o">=</span> <span class="o">.</span><span class="n">calling</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="n">callState</span> <span class="o">=</span> <span class="o">.</span><span class="n">noCall</span>
            <span class="k">await</span> <span class="nf">showAlert</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
            <span class="k">await</span> <span class="nf">cancelSubscriptions</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h4 id='initiating-a-video-call' class='heading'>Initiating a video call</h4>

<p>You don&rsquo;t have to check the camera permission, the sdk will do it by itself. But you will need to provide <code>TVIVideoView</code> container for the remote and local video tracks.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">startCall</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">Task</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">callRequest</span> <span class="o">=</span> <span class="kt">CallRequest</span><span class="p">(</span>
                <span class="nv">languageFromId</span><span class="p">:</span> <span class="n">selectedLanguageFrom</span><span class="p">,</span>
                <span class="nv">languageToId</span><span class="p">:</span> <span class="n">selectedLanguageTo</span><span class="p">,</span>
                <span class="nv">serviceTypeId</span><span class="p">:</span> <span class="n">selectedServiceType</span><span class="p">,</span>
                <span class="nv">genderId</span><span class="p">:</span> <span class="n">selectedGender</span><span class="p">,</span>
                <span class="nv">isVideo</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">AdditionalField</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"CustomKey"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"CustomValue"</span><span class="p">)],</span>
                <span class="nv">fieldData</span><span class="p">:</span> <span class="n">fields</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="nf">subscribeOnCallEvents</span><span class="p">()</span>
            <span class="k">await</span> <span class="nf">subscribeOnChatEvents</span><span class="p">()</span>
            <span class="k">let</span> <span class="nv">call</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">boostlingo</span><span class="o">.</span><span class="nf">makeVideoCall</span><span class="p">(</span>
                <span class="nv">callRequest</span><span class="p">:</span> <span class="k">await</span> <span class="n">callRequest</span><span class="p">,</span>
                <span class="nv">localVideoView</span><span class="p">:</span> <span class="n">localView</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="nf">setCall</span><span class="p">(</span><span class="n">call</span><span class="p">)</span>
            <span class="n">callState</span> <span class="o">=</span> <span class="o">.</span><span class="n">calling</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="n">callState</span> <span class="o">=</span> <span class="o">.</span><span class="n">noCall</span>
            <span class="k">await</span> <span class="nf">showAlert</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
            <span class="k">await</span> <span class="nf">cancelSubscriptions</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Later you will need to add a <code>TVIVideoView</code> as a renderer for remote participants when they join.</p>
<pre class="highlight swift"><code><span class="k">case</span> <span class="o">.</span><span class="nf">participantConnected</span><span class="p">(</span><span class="k">let</span> <span class="nv">participant</span><span class="p">,</span> <span class="nv">call</span><span class="p">:</span> <span class="k">let</span> <span class="nv">call</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"callParticipantConnected"</span><span class="p">)</span>
    <span class="k">switch</span> <span class="n">participant</span><span class="o">.</span><span class="n">participantType</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">interpreter</span><span class="p">:</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">renderer</span> <span class="o">=</span> <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">removeView</span> <span class="p">{</span>
            <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">call</span><span class="p">?</span><span class="o">.</span><span class="nf">addRenderer</span><span class="p">(</span>
                <span class="nv">for</span><span class="p">:</span> <span class="n">participant</span><span class="o">.</span><span class="n">identity</span><span class="p">,</span>
                <span class="nv">renderer</span><span class="p">:</span> <span class="n">renderer</span>
            <span class="p">)</span>
        <span class="p">}</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">thirdParty</span><span class="p">:</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">renderer</span> <span class="o">=</span> <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">thirdPartyParticipantView</span> <span class="p">{</span>
            <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">call</span><span class="p">?</span><span class="o">.</span><span class="nf">addRenderer</span><span class="p">(</span>
                <span class="nv">for</span><span class="p">:</span> <span class="n">participant</span><span class="o">.</span><span class="n">identity</span><span class="p">,</span>
                <span class="nv">renderer</span><span class="p">:</span> <span class="n">renderer</span>
            <span class="p">)</span>
        <span class="p">}</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="p">}</span>
</code></pre>
<h4 id='sending-a-chat-message' class='heading'>Sending a chat message</h4>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">sendTestMessage</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">Task</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="n">_</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">state</span><span class="o">.</span><span class="n">boostlingo</span><span class="o">.</span><span class="nf">sendChatMessage</span><span class="p">(</span><span class="nv">text</span><span class="p">:</span> <span class="s">"Test"</span><span class="p">)</span>
            <span class="k">await</span> <span class="nf">showAlert</span><span class="p">(</span><span class="s">"Message sent"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="k">await</span> <span class="nf">showAlert</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='geting-profile-image-url' class='heading'>Geting profile image URL</h3>

<p>Getting requestor profile image url.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">boostlingo</span><span class="o">.</span><span class="nf">getProfile</span><span class="p">()?</span><span class="o">.</span><span class="n">imageInfo</span><span class="p">?</span><span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">64</span><span class="p">)</span>
</code></pre>

<p>Getting a participant profile image url from <em>BLCall</em>.</p>
<pre class="highlight swift"><code><span class="c1">// Get the interpreter profile image URL</span>
<span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call</span><span class="p">?</span><span class="o">.</span><span class="n">participants</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">imageInfo</span><span class="p">?</span><span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</code></pre>
<h2 id='more-documentation' class='heading'>More Documentation</h2>

<p>You can find more documentation and useful information below:</p>

<ul>
<li><a href="https://github.com/boostlingo/boostlingo-ios/tree/master">Quickstart</a></li>
<li><a href="https://boostlingo.github.io/boostlingo-ios">Doc</a></li>
</ul>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2025 <a class="link" href="https://www.boostlingo.com/" target="_blank" rel="external noopener">Boostlingo</a>. All rights reserved. (Last updated: 2025-06-24)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy  v0.15.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
    </section>
  </body>
</html>
